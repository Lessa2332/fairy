<!DOCTYPE html>
<html lang="uk">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
Â  Â  <title>ğŸ¦· AR Nikadent-Family - Ğ”Ğ˜Ğ¢Ğ¯Ğ§Ğ Ğ’Ğ•Ğ Ğ¡Ğ†Ğ¯</title>

Â  Â  <script src="https://aframe.io/releases/1.6.0/aframe.min.js  "></script>
Â  Â  <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.2/dist/mindar-image-aframe.prod.js  "></script>
Â  Â  <script src="https://cdn.jsdelivr.net/npm/aframe-extras@6.1.1/dist/aframe-extras.min.js  "></script>Â 

Â  Â  <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&display=swap" rel="stylesheet">

Â  Â  <style>
Â  Â  Â  Â  html, body {
Â  Â  Â  Â  Â  Â  margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden;
Â  Â  Â  Â  Â  Â  font-family: 'Comic Neue', 'Comic Sans MS', cursive, sans-serif;
Â  Â  Â  Â  Â  Â  text-transform: none; background: #f0f0f0;
Â  Â  Â  Â  }
Â  Â  Â  Â  a-scene {
Â  Â  Â  Â  Â  Â  width: 100% !important; height: 100% !important; position: fixed;
Â  Â  Â  Â  Â  Â  top: 0; left: 0; background: transparent;
Â  Â  Â  Â  }
Â  Â  Â  Â  .arjs-loader {
Â  Â  Â  Â  Â  Â  height: 100%; width: 100%; position: absolute; top: 0; left: 0;
Â  Â  Â  Â  Â  Â  background: rgba(255, 255, 255, 0.95); z-index: 9999; display: flex;
Â  Â  Â  Â  Â  Â  flex-direction: column; justify-content: center; align-items: center;
Â  Â  Â  Â  Â  Â  color: #4A00E0; font-size: 1.8em; text-align: center; padding: 20px; /* Ğ—Ğ±Ñ–Ğ»ÑŒÑˆĞµĞ½Ğ¸Ğ¹ Ñ‚ĞµĞºÑÑ‚ */
Â  Â  Â  Â  Â  Â  font-family: 'Comic Neue', sans-serif; text-transform: none;
Â  Â  Â  Â  }
Â  Â  Â  Â  .ui-btn {
Â  Â  Â  Â  Â  Â  position: fixed; padding: 15px 25px; border-radius: 30px; /* Ğ‘Ñ–Ğ»ÑŒÑˆÑ– ĞºĞ½Ğ¾Ğ¿ĞºĞ¸ */
Â  Â  Â  Â  Â  Â  font-size: 1.3em; font-weight: bold; z-index: 1000;
Â  Â  Â  Â  Â  Â  box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3); transition: all 0.2s ease;
Â  Â  Â  Â  Â  Â  cursor: pointer; border: 3px solid white; display: none;
Â  Â  Â  Â  Â  Â  font-family: 'Comic Neue', sans-serif; text-transform: none;
Â  Â  Â  Â  Â  Â  width: 45%; max-width: 250px; text-align: center;
Â  Â  Â  Â  }
        /* ĞĞ¾Ğ²Ğµ, Ğ±Ñ–Ğ»ÑŒÑˆ Ñ–Ğ½Ñ‚ÑƒÑ—Ñ‚Ğ¸Ğ²Ğ½Ğµ Ñ€Ğ¾Ğ·Ñ‚Ğ°ÑˆÑƒĞ²Ğ°Ğ½Ğ½Ñ ĞºĞ½Ğ¾Ğ¿Ğ¾Ğº */
Â  Â  Â  Â  #startGame1Btn { bottom: 180px; left: 5%; background: linear-gradient(45deg, #FF6B6B, #FF8E53); color: white; }
Â  Â  Â  Â  #startGame2Btn { bottom: 180px; right: 5%; background: linear-gradient(45deg, #87CEFA, #4682B4); color: white; }
Â  Â  Â  Â  #rulesBtn { bottom: 90px; left: 5%; background: linear-gradient(45deg, #FFD700, #FFA500); color: #4A00E0; border: 3px solid #4A00E0; }
Â  Â  Â  Â  #soundBtn { bottom: 90px; right: 5%; background: linear-gradient(45deg, #00CED1, #20B2AA); color: white; }

        /* ĞšĞ½Ğ¾Ğ¿ĞºĞ° "ĞŸĞ°ÑƒĞ·Ğ°" / "Ğ’Ğ¸Ñ…Ñ–Ğ´" */
Â  Â  Â  Â  #stopBtn {
            position: fixed; bottom: 20px; right: 20px; left: auto; transform: none;
            padding: 12px 20px; font-size: 1.1em;
            background: linear-gradient(45deg, #ff4757, #ff6b81);
            max-width: 150px;
        }
Â  Â  Â  Â  #endBtn, #cleaningEndBtn { /* Ğ”Ğ¾Ğ´Ğ°Ñ‚ĞºĞ¾Ğ²Ñ– ĞºĞ½Ğ¾Ğ¿ĞºĞ¸ Ğ´Ğ»Ñ Game 1/2 */
Â  Â  Â  Â  Â  Â  position: fixed; bottom: 20px; left: 20px; right: auto; transform: none;
Â  Â  Â  Â  Â  Â  padding: 12px 20px; font-size: 1.1em; max-width: 200px;
Â  Â  Â  Â  Â  Â  background: linear-gradient(45deg, #4CAF50, #8BC34A);
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  }
Â  Â  Â  Â  .corner-btn {
Â  Â  Â  Â  Â  Â  position: fixed; bottom: 10px; padding: 8px 15px; border-radius: 20px;
Â  Â  Â  Â  Â  Â  font-size: 0.85em; font-weight: bold; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
Â  Â  Â  Â  Â  Â  display: none; font-family: 'Comic Neue'; z-index: 1100; text-decoration: none;
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  }
Â  Â  Â  Â  #youtubeBtn { left: 10px; background: linear-gradient(45deg, #ff4757, #ff6348); color: white; }
Â  Â  Â  Â  #aboutBtn { right: 10px; background: linear-gradient(45deg, #4CAF50, #8BC34A); color: white; }
Â  Â  Â  Â  .ui-info-text {
Â  Â  Â  Â  Â  Â  position: fixed; left: 10px; z-index: 500;
Â  Â  Â  Â  Â  Â  font-family: 'Comic Neue'; text-align: left; font-weight: bold;
Â  Â  Â  Â  Â  Â  text-shadow: 2px 2px 6px rgba(255, 255, 255, 0.7);
            color: #4A00E0; font-size: 1.6em; /* Ğ—Ğ±Ñ–Ğ»ÑŒÑˆÑƒÑ”Ğ¼Ğ¾ Ñ€Ğ¾Ğ·Ğ¼Ñ–Ñ€ */
Â  Â  Â  Â  }
        #timerText { top: 10px; }
        #scoreText { top: 60px; }

Â  Â  Â  Â  #endMessage, #rulesMessage {
Â  Â  Â  Â  Â  Â  position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
Â  Â  Â  Â  Â  Â  background: rgba(74,21,75,0.95); color: white; padding: 30px; /* Ğ‘Ñ–Ğ»ÑŒÑˆĞ¸Ğ¹ Ğ¿Ğ°Ğ´Ñ–Ğ½Ğ³ */
Â  Â  Â  Â  Â  Â  border-radius: 20px; z-index: 10000; font-size: 1.5em; /* Ğ’ĞµĞ»Ğ¸ĞºĞ¸Ğ¹, Ğ´Ğ¸Ñ‚ÑÑ‡Ğ¸Ğ¹ ÑˆÑ€Ğ¸Ñ„Ñ‚ */
Â  Â  Â  Â  Â  Â  text-align: center; font-family: 'Comic Neue';
Â  Â  Â  Â  Â  Â  box-shadow: 0 10px 30px rgba(0,0,0,0.6); display: none;
Â  Â  Â  Â  Â  Â  max-width: 90%;
Â  Â  Â  Â  }
Â  Â  Â  Â  #rulesMessage {
Â  Â  Â  Â  Â  Â  background: linear-gradient(135deg, #4A00E0, #8E2DE2);
Â  Â  Â  Â  Â  Â  border: 3px solid #FFD700;
Â  Â  Â  Â  }
        #rulesMessage ul { text-align: left; list-style-type: 'ğŸŒŸ '; padding-left: 20px; }
        #rulesMessage li { margin-bottom: 8px; }
Â  Â  Â  Â  #rulesMessage button {
Â  Â  Â  Â  Â  Â  margin-top: 25px; padding: 15px 30px; border: none; border-radius: 30px;
Â  Â  Â  Â  Â  Â  background: #FFD700; color: #4A00E0; font-weight: bold; cursor: pointer;
Â  Â  Â  Â  Â  Â  font-size: 1.2em;
Â  Â  Â  Â  }
Â  Â  Â  Â  @keyframes pulse {
Â  Â  Â  Â  Â  Â  0% { transform: scale(1); }
Â  Â  Â  Â  Â  Â  50% { transform: scale(1.05); }
Â  Â  Â  Â  Â  Â  100% { transform: scale(1); }
Â  Â  Â  Â  }
Â  Â  </style>
</head>
<body>
Â  Â  <div class="arjs-loader" id="loader">
Â  Â  Â  Â  <div class="pulse">ğŸ¦· Ğ¨ÑƒĞºĞ°Ğ¹ Ñ‡Ğ°Ñ€Ñ–Ğ²Ğ½Ñƒ Ğ²Ñ–Ğ·Ğ¸Ñ‚Ñ–Ğ²ĞºÑƒ!</div>
Â  Â  Â  Â  <div style="margin-top: 20px; font-size: 1.2em; font-weight: bold; color: #ff0000;">
Â  Â  Â  Â  Â  Â  â— ĞĞ°Ğ²ĞµĞ´Ğ¸ ĞºĞ°Ğ¼ĞµÑ€Ñƒ Ğ½Ğ° Ğ¼Ğ°Ñ€ĞºĞµÑ€!
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div style="margin-top: 10px; font-size: 1.1em;">
Â  Â  Â  Â  Â  Â  Ğ¢Ğ¸ Ğ¼Ğ¾Ğ¶ĞµÑˆ Ğ¿Ğ¾ĞºÑ€ÑƒÑ‚Ğ¸Ñ‚Ğ¸ Ñ‚Ğ° Ğ·Ğ±Ñ–Ğ»ÑŒÑˆĞ¸Ñ‚Ğ¸ Ğ·ÑƒĞ±Ñ‡Ğ¸Ğº! ğŸ˜Š
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <p id="timerText" class="ui-info-text">â³ Ğ§Ğ°Ñ: 00</p>
Â  Â  <p id="scoreText" class="ui-info-text">ğŸŒŸ Ğ‘Ğ°Ğ»Ñ–Ğ²: 0</p>

Â  Â  <div id="rulesMessage">
Â  Â  Â  Â  <h3>ğŸ’¡ ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ° Ğ“Ñ€Ğ¸ "Ğ—Ğ´Ğ¾Ñ€Ğ¾Ğ²Ğ° Ğ£ÑĞ¼Ñ–ÑˆĞºĞ°"!</h3>
Â  Â  Â  Â  <p style="font-size: 1.1em; font-weight: bold;">ĞĞ±Ğ¸Ñ€Ğ°Ğ¹, Ğ´Ñ€ÑƒĞ¶Ğµ, Ğ· Ñ‡Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ñ‡Ğ½ĞµĞ¼Ğ¾! ğŸ‘‡</p>
Â  Â  Â  Â  <hr style="border-color: #FFD700;">
Â  Â  Â  Â  <p><strong>ğŸ¥• Ğ“Ñ€Ğ° 1: "Ğ—Ğ´Ğ¾Ñ€Ğ¾Ğ²Ğ¸Ğ¹ Ğ’Ğ¸Ğ±Ñ–Ñ€" (45 ÑĞµĞº)</strong></p>
Â  Â  Â  Â  <ul>
Â  Â  Â  Â  Â  Â  <li>âœ… ĞšĞ»Ñ–ĞºĞ°Ğ¹ Ñ‚Ñ–Ğ»ÑŒĞºĞ¸ Ğ½Ğ° **ĞºĞ¾Ñ€Ğ¸ÑĞ½Ğµ** (ğŸ, ğŸ¦·, ğŸª¥). Ğ¦Ğµ **+10 Ğ±Ğ°Ğ»Ñ–Ğ²**!</li>
Â  Â  Â  Â  Â  Â  <li>âŒ Ğ¨ĞºÑ–Ğ´Ğ»Ğ¸Ğ²Ñ– Ñ†ÑƒĞºĞµÑ€ĞºĞ¸ Ğ±Ğ°Ğ»Ğ¸ **ĞĞ• Ğ—ĞĞ†ĞœĞĞ®Ğ¢Ğ¬**, Ğ°Ğ»Ğµ Ñ‚Ğ¸ Ğ²Ñ‚Ñ€Ğ°Ñ‡Ğ°Ñ”Ñˆ Ñ‡Ğ°Ñ!</li>
Â  Â  Â  Â  </ul>
Â  Â  Â  Â  <hr style="border-color: #FFD700;">
Â  Â  Â  Â  <p><strong>ğŸ§¼ Ğ“Ñ€Ğ° 2: "Ğ§Ğ¸ÑÑ‚ĞºĞ° Ğ—ÑƒĞ±Ñ–Ğ²" (20 ÑĞµĞº)</strong></p>
Â  Â  Â  Â  <ul>
Â  Â  Â  Â  Â  Â  <li>ğŸ§¹ Ğ¨Ğ²Ğ¸Ğ´ĞºĞ¾ **Ğ²Ğ¸Ñ‚Ğ¸Ñ€Ğ°Ğ¹ Ğ¿Ğ°Ğ»ÑŒÑ†ĞµĞ¼** Ğ²ÑÑ– Ğ¶Ğ¾Ğ²Ñ‚Ñ– Ğ¿Ğ»ÑĞ¼Ğ¸ Ğ· Ğ·ÑƒĞ±Ñ‡Ğ¸ĞºĞ°. ĞšĞ¾Ğ¶Ğ½Ğ° Ğ¿Ğ»ÑĞ¼Ğ° **+10 Ğ±Ğ°Ğ»Ñ–Ğ²**!</li>
Â  Â  Â  Â  </ul>
Â  Â  Â  Â  <p style="font-weight: bold; margin-top: 20px;">Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¸Ğ¹?</p>
Â  Â  Â  Â  <button id="closeRulesBtn">ĞŸĞ¾Ñ‡Ğ°Ğ»Ğ¸!</button>
Â  Â  </div>

Â  Â  <div id="endMessage"></div>

Â  Â  <div id="canvasGameContainer" style="display: none;">
Â  Â  Â  Â  <canvas id="gameCanvas"></canvas>
Â  Â  Â  Â  <button id="endBtn" class="ui-btn" style="display: block;">â–¶ï¸ Ğ§Ğ¸ÑÑ‚Ğ¸Ñ‚Ğ¸ Ğ·ÑƒĞ±Ñ‡Ğ¸Ğº!</button>
Â  Â  </div>

Â  Â  <div id="cleaningGameContainer" style="display: none;">
Â  Â  Â  Â  <canvas id="cleaningCanvas"></canvas>
Â  Â  Â  Â  <button id="cleaningEndBtn" class="ui-btn" style="display: block;">âœ… Ğ¯ Ğ¿Ğ¾Ñ‡Ğ¸ÑÑ‚Ğ¸Ğ²!</button>
Â  Â  </div>

Â  Â  <a-scene
Â  Â  Â  Â  mindar-image="imageTargetSrc: my-marker.mind;"
Â  Â  Â  Â  vr-mode-ui="enabled: false"
Â  Â  Â  Â  device-orientation-permission-ui="enabled: false"
Â  Â  Â  Â  loading-screen="enabled: false"
Â  Â  Â  Â  embedded
Â  Â  Â  Â  renderer="colorManagement: true; physicallyCorrectLights: true;"
Â  Â  Â  Â  touch-gestures="targetId: tooth-model; initialScale: 0.3;"
Â  Â  >
Â  Â  Â  Â  <a-assets>
Â  Â  Â  Â  Â  Â  <a-asset-item id="toothModel" src="assets/3d_models/a-gltf-model.glb"></a-asset-item>
Â  Â  Â  Â  Â  Â  <audio id="welcomeSound" src="assets/audio/sound1.mp3" preload="auto" muted playsinline crossorigin="anonymous"></audio>
Â  Â  Â  Â  Â  Â  <audio id="bg-music" src="assets/audio/sound4.mp3" preload="auto" muted playsinline crossorigin="anonymous"></audio>
Â  Â  Â  Â  Â  Â  <audio id="applauseSound" src="assets/audio/applause.mp3" preload="auto" muted playsinline crossorigin="anonymous"></audio>
Â  Â  Â  Â  Â  Â  <audio id="toothClickSound" src="assets/audio/sound5.mp3" preload="auto" muted playsinline crossorigin="anonymous"></audio>
            Â  Â  Â  Â  </a-assets>

Â  Â  Â  Â  <a-camera look-controls="enabled: false" position="0 0 0">
Â  Â  Â  Â  Â  Â  Â <a-cursor raycaster="objects: .clickable;" cursor="fuse: false; maxDistance: 10"
Â  Â  Â  Â  Â  Â  Â  Â  position="0 0 -1" geometry="primitive: ring; radiusOuter: 0.015; radiusInner: 0.008"
Â  Â  Â  Â  Â  Â  Â  Â  material="color: #FFD700; shader: flat"
Â  Â  Â  Â  Â  Â  ></a-cursor>
Â  Â  Â  Â  </a-camera>

Â  Â  Â  Â  <a-entity mindar-image-target="targetIndex: 0" id="target-entity">
Â  Â  Â  Â  Â  Â  <a-gltf-model
Â  Â  Â  Â  Â  Â  Â  Â  id="tooth-model"
Â  Â  Â  Â  Â  Â  Â  Â  class="clickable"
Â  Â  Â  Â  Â  Â  Â  Â  src="#toothModel"
Â  Â  Â  Â  Â  Â  Â  Â  scale="0.3 0.3 0.3"
Â  Â  Â  Â  Â  Â  Â  Â  position="0 0 0.1"
Â  Â  Â  Â  Â  Â  Â  Â  rotation="0 0 0"
Â  Â  Â  Â  Â  Â  Â  Â  shadow
Â  Â  Â  Â  Â  Â  Â  Â  animation-mixer="clip: Idle; loop: repeat; timeScale: 1.0; autoplay: true;">
Â  Â  Â  Â  Â  Â  </a-gltf-model>
Â  Â  Â  Â  </a-entity>
Â  Â  </a-scene>

Â  Â  <button id="soundBtn" class="ui-btn">ğŸ”Š Ğ£Ğ²Ñ–Ğ¼ĞºĞ½ÑƒÑ‚Ğ¸ Ğ·Ğ²ÑƒĞº</button>
Â  Â  <button id="rulesBtn" class="ui-btn">â“ ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ°</button>
Â  Â  <button id="startGame1Btn" class="ui-btn">ğŸ¥• Ğ“Ñ€Ğ° 1: Ğ’Ğ¸Ğ±Ñ–Ñ€</button>
Â  Â  <button id="startGame2Btn" class="ui-btn">ğŸ§¼ Ğ“Ñ€Ğ° 2: Ğ§Ğ¸ÑÑ‚ĞºĞ°</button>
Â  Â  <button id="stopBtn" class="ui-btn" onclick="stopGame()">âŒ Ğ’Ğ¸Ñ…Ñ–Ğ´</button>
Â  Â Â 
Â  Â  <a href="  https://www.youtube.com/@23smartlessa32?si=d3NhKDot8U8Mc2Hi" id="youtubeBtn" class="corner-btn" target="_blank" rel="noopener noreferrer">â¤ï¸ ĞĞ²Ñ‚Ğ¾Ñ€</a>
Â  Â  <a href="  https://nikadent-family.com.ua/ua/  " id="aboutBtn" class="corner-btn" target="_blank" rel="noopener noreferrer">â„¹ï¸ ĞŸÑ€Ğ¾ Ğ½Ğ°Ñ</a>

Â  Â  <script>
Â  Â  Â  Â  // === Ğ“Ğ›ĞĞ‘ĞĞ›Ğ¬ĞĞ† Ğ—ĞœĞ†ĞĞĞ† (Ğ†Ğ½Ñ–Ñ†Ñ–Ğ°Ğ»Ñ–Ğ·Ğ°Ñ†Ñ–Ñ Ğ±ĞµĞ· Ğ·Ğ¼Ñ–Ğ½) ===
Â  Â  Â  Â  const loader = document.querySelector('#loader');
Â  Â  Â  Â  const targetEntity = document.querySelector('#target-entity'); // ĞĞ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¾ Ğ´Ğ»Ñ ID
Â  Â  Â  Â  const toothModel = document.querySelector('#tooth-model');
Â  Â  Â  Â  const startGame1Btn = document.querySelector('#startGame1Btn');
Â  Â  Â  Â  const startGame2Btn = document.querySelector('#startGame2Btn');
Â  Â  Â  Â  const stopBtn = document.querySelector('#stopBtn');
Â  Â  Â  Â  const rulesBtn = document.querySelector('#rulesBtn');
Â  Â  Â  Â  const soundBtn = document.querySelector('#soundBtn');
Â  Â  Â  Â  const youtubeBtn = document.querySelector('#youtubeBtn');
Â  Â  Â  Â  const aboutBtn = document.querySelector('#aboutBtn');
Â  Â  Â  Â  const timerText = document.getElementById('timerText');
Â  Â  Â  Â  const scoreText = document.getElementById('scoreText');
Â  Â  Â  Â  const welcomeSound = document.querySelector('#welcomeSound');
Â  Â  Â  Â  const bgMusic = document.querySelector('#bg-music');
Â  Â  Â  Â  const applauseSound = document.querySelector('#applauseSound');
Â  Â  Â  Â  const toothClickSound = document.querySelector('#toothClickSound');
Â  Â  Â  Â  const endMessage = document.getElementById('endMessage');
Â  Â  Â  Â  const rulesMessage = document.getElementById('rulesMessage');
Â  Â  Â  Â  const closeRulesBtn = document.getElementById('closeRulesBtn');
Â  Â  Â  Â  const endBtn = document.getElementById('endBtn');
Â  Â  Â  Â  const cleaningEndBtn = document.getElementById('cleaningEndBtn');
        const canvasGameContainer = document.getElementById('canvasGameContainer');
        const cleaningGameContainer = document.getElementById('cleaningGameContainer');

Â  Â  Â  Â  let isGameRunning = false;
Â  Â  Â  Â  let isPaused = false;
Â  Â  Â  Â  let score = 0;
Â  Â  Â  Â  let emojis = [];
Â  Â  Â  Â  let spots = [];
Â  Â  Â  Â  let startTime = null;
Â  Â  Â  Â  let inputHandler = null;
Â  Â  Â  Â  let currentGame = null;
Â  Â  Â  Â  let animationFrameId = null;
Â  Â  Â  Â  let hasPlayedWelcomeSound = false;
        let isTargetVisible = false; // ĞĞ¾Ğ²Ğ¸Ğ¹ Ğ¿Ñ€Ğ°Ğ¿Ğ¾Ñ€ĞµÑ†ÑŒ Ğ´Ğ»Ñ AR

        // === Ğ¤Ğ†ĞšĞ¡ĞĞ¦Ğ†Ğ¯ Ğ’Ğ˜Ğ¡ĞĞ¢Ğ˜ ===
        function fixHeight() { document.body.style.height = window.innerHeight + 'px'; }
Â  Â  Â  Â  fixHeight();
Â  Â  Â  Â  window.addEventListener('resize', fixHeight);

Â  Â  Â  Â  // === ĞšĞĞœĞŸĞĞĞ•ĞĞ¢ Ğ–Ğ•Ğ¡Ğ¢Ğ†Ğ’ (Ğ‘Ğ•Ğ— Ğ—ĞœĞ†Ğ) ===
Â  Â  Â  Â  AFRAME.registerComponent('touch-gestures', {
Â  Â  Â  Â  Â  Â  schema: {
Â  Â  Â  Â  Â  Â  Â  Â  targetId: { type: 'string', default: '' },
Â  Â  Â  Â  Â  Â  Â  Â  initialScale: { type: 'number', default: 0.3 },
Â  Â  Â  Â  Â  Â  Â  Â  minScale: { type: 'number', default: 0.15 },
Â  Â  Â  Â  Â  Â  Â  Â  maxScale: { type: 'number', default: 1.0 },
Â  Â  Â  Â  Â  Â  Â  Â  rotationSpeed: { type: 'number', default: 0.5 }
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  init: function () {
Â  Â  Â  Â  Â  Â  Â  Â  this.isRotating = false;
Â  Â  Â  Â  Â  Â  Â  Â  this.isPinching = false;
Â  Â  Â  Â  Â  Â  Â  Â  this.startPos = { x: 0, y: 0 };
Â  Â  Â  Â  Â  Â  Â  Â  this.initialDistance = 0;
Â  Â  Â  Â  Â  Â  Â  Â  this.currentScale = this.data.initialScale;
Â  Â  Â  Â  Â  Â  Â  Â  this.targetEl = document.querySelector(`#${this.data.targetId}`);
Â  Â  Â  Â  Â  Â  Â  Â  if (!this.targetEl) return;
Â  Â  Â  Â  Â  Â  Â  Â  const initial = this.data.initialScale;
Â  Â  Â  Â  Â  Â  Â  Â  this.targetEl.object3D.scale.set(initial, initial, initial);
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  this.el.addEventListener('touchstart', (e) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (isGameRunning) return;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!toothClickSound.muted) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  toothClickSound.currentTime = 0;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  toothClickSound.play().catch(console.log);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (e.touches.length === 1) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.isRotating = true;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.startPos.x = e.touches[0].pageX;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.startPos.y = e.touches[0].pageY;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else if (e.touches.length === 2) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.isPinching = true;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.isRotating = false;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.initialDistance = Math.hypot(
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  e.touches[0].pageX - e.touches[1].pageX,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  e.touches[0].pageY - e.touches[1].pageY
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.currentScale = this.targetEl.object3D.scale.x;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  this.el.addEventListener('touchmove', (e) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (isGameRunning) return;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (this.isPinching && e.touches.length === 2) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const currentDistance = Math.hypot(
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  e.touches[0].pageX - e.touches[1].pageX,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  e.touches[0].pageY - e.touches[1].pageY
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const scaleFactor = currentDistance / this.initialDistance;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let newScale = this.currentScale * scaleFactor;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  newScale = Math.max(this.data.minScale, Math.min(this.data.maxScale, newScale));
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.targetEl.object3D.scale.set(newScale, newScale, newScale);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else if (this.isRotating && e.touches.length === 1) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const deltaX = (e.touches[0].pageX - this.startPos.x) * this.data.rotationSpeed;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const deltaY = (e.touches[0].pageY - this.startPos.y) * this.data.rotationSpeed;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.targetEl.object3D.rotation.y += THREE.MathUtils.degToRad(deltaX);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.targetEl.object3D.rotation.x += THREE.MathUtils.degToRad(deltaY);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.startPos.x = e.touches[0].pageX;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.startPos.y = e.touches[0].pageY;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  this.el.addEventListener('touchend', () => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.isRotating = false;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.isPinching = false;
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });

Â  Â  Â  Â  // === Ğ’Ğ—ĞĞ„ĞœĞĞ”Ğ†Ğ¯ Ğ— Ğ—Ğ£Ğ‘Ğ§Ğ˜ĞšĞĞœ (Ğ‘Ğ•Ğ— Ğ—ĞœĞ†Ğ) ===
Â  Â  Â  Â  toothModel.addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  if (!isGameRunning && rulesMessage.style.display !== 'block') {
Â  Â  Â  Â  Â  Â  Â  Â  if (!toothClickSound.muted) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  toothClickSound.currentTime = 0;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  toothClickSound.play().catch(console.log);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  toothModel.setAttribute('animation__pulse', {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  property: 'scale',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  to: '0.35 0.35 0.35',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  dur: 200,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  dir: 'alternate',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  loop: 2
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  endMessage.textContent = "ğŸ¦· ĞŸÑ€Ğ¸Ğ²Ñ–Ñ‚! ĞŸĞ¾ĞºÑ€ÑƒÑ‚Ğ¸ Ñ‚Ğ° Ğ¿Ğ¾Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±ÑƒĞ¹ Ğ¼ĞµĞ½Ğµ! Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¸Ğ¹ Ğ´Ğ¾ Ğ³Ñ€Ğ¸?";
Â  Â  Â  Â  Â  Â  Â  Â  endMessage.style.display = 'block';
Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => endMessage.style.display = 'none', 3000);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });

Â  Â  Â  Â  // === ĞŸĞĞ”Ğ†Ğ‡ ĞœĞĞ ĞšĞ•Ğ Ğ (ĞšĞ›Ğ®Ğ§ĞĞ’Ğ Ğ—ĞœĞ†ĞĞ AR-Ğ›ĞĞ“Ğ†ĞšĞ˜) ===
Â  Â  Â  Â  targetEntity.addEventListener('targetFound', () => {
            isTargetVisible = true;
Â  Â  Â  Â  Â  Â  loader.style.display = 'none';
Â  Â  Â  Â  Â  Â  if (!hasPlayedWelcomeSound) {
Â  Â  Â  Â  Â  Â  Â  Â  welcomeSound.muted = false;
Â  Â  Â  Â  Â  Â  Â  Â  welcomeSound.play().catch(e => console.log("ğŸ”‡ ĞŸÑ€Ğ¸Ğ²Ñ–Ñ‚Ğ°Ğ½Ğ½Ñ:", e));
Â  Â  Â  Â  Â  Â  Â  Â  hasPlayedWelcomeSound = true;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  updateUI();
Â  Â  Â  Â  });
Â  Â  Â  Â  targetEntity.addEventListener('targetLost', () => {
            isTargetVisible = false;
            // !!! ĞšĞ›Ğ®Ğ§ĞĞ’Ğ Ğ—ĞœĞ†ĞĞ: ĞĞ• Ğ¥ĞĞ’ĞĞ„ĞœĞ ĞœĞĞ”Ğ•Ğ›Ğ¬, Ğ¯ĞšĞ©Ğ Ğ“Ğ Ğ ĞĞ• Ğ™Ğ”Ğ•!!!
            if (!isGameRunning) toothModel.object3D.visible = true;
            updateUI();
        });

Â  Â  Â  Â  function updateUI() {
Â  Â  Â  Â  Â  Â  const visible = isTargetVisible; // Ğ’Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ¾Ğ²ÑƒÑ”Ğ¼Ğ¾ Ğ½Ğ¾Ğ²Ğ¸Ğ¹ Ğ¿Ñ€Ğ°Ğ¿Ğ¾Ñ€ĞµÑ†ÑŒ
            
            // Ğ—Ğ°Ğ²Ğ¶Ğ´Ğ¸ Ñ…Ğ¾Ğ²Ğ°Ñ”Ğ¼Ğ¾ ĞºĞ½Ğ¾Ğ¿ĞºĞ¸, ÑĞºÑ‰Ğ¾ Ğ³Ñ€Ğ° Ğ·Ğ°Ğ¿ÑƒÑ‰ĞµĞ½Ğ°
            const showMenuButtons = visible && !isGameRunning && rulesMessage.style.display !== 'block';

            startGame1Btn.style.display = showMenuButtons ? 'block' : 'none';
            startGame2Btn.style.display = showMenuButtons ? 'block' : 'none';
            rulesBtn.style.display = showMenuButtons ? 'block' : 'none';
            soundBtn.style.display = showMenuButtons ? 'block' : 'none';

            // Ğ¡Ğ¾Ñ†Ñ–Ğ°Ğ»ÑŒĞ½Ñ– ĞºĞ½Ğ¾Ğ¿ĞºĞ¸ Ğ·Ğ°Ğ»Ğ¸ÑˆĞ°Ñ”Ğ¼Ğ¾, ÑĞºÑ‰Ğ¾ Ñ…Ğ¾Ñ‡Ğ° Ğ± Ğ²Ğ¸Ğ´Ğ½Ğ¾ AR
            youtubeBtn.style.display = visible ? 'block' : 'none';
            aboutBtn.style.display = visible ? 'block' : 'none';

            // Ğ†Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ Ğ³Ñ€Ğ¸
            if (isGameRunning) {
                stopBtn.style.display = 'block';
                timerText.style.display = 'block';
                scoreText.style.display = 'block';
            } else {
                stopBtn.style.display = 'none';
                timerText.style.display = 'none';
                scoreText.style.display = 'none';
            }
Â  Â  Â  Â  }

Â  Â  Â  Â  // === ĞšĞ•Ğ Ğ£Ğ’ĞĞĞĞ¯ Ğ—Ğ’Ğ£ĞšĞĞœ (Ğ‘Ğ•Ğ— Ğ—ĞœĞ†Ğ) ===
Â  Â  Â  Â  function toggleSound() {
Â  Â  Â  Â  Â  Â  const isMuted = bgMusic.muted;
Â  Â  Â  Â  Â  Â  bgMusic.muted = !isMuted;
Â  Â  Â  Â  Â  Â  welcomeSound.muted = !isMuted;
Â  Â  Â  Â  Â  Â  toothClickSound.muted = !isMuted;
Â  Â  Â  Â  Â  Â  applauseSound.muted = !isMuted;
Â  Â  Â  Â  Â  Â  soundBtn.textContent = isMuted ? "ğŸ”Š Ğ£Ğ²Ñ–Ğ¼ĞºĞ½ÑƒÑ‚Ğ¸ Ğ·Ğ²ÑƒĞº" : "ğŸ”‡ Ğ’Ğ¸Ğ¼ĞºĞ½ÑƒÑ‚Ğ¸ Ğ·Ğ²ÑƒĞº";
Â  Â  Â  Â  Â  Â  if (!isMuted && isGameRunning) {
Â  Â  Â  Â  Â  Â  Â  Â  bgMusic.play().catch(console.log);
Â  Â  Â  Â  Â  Â  } else if (isMuted) {
Â  Â  Â  Â  Â  Â  Â  Â  bgMusic.pause();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â  soundBtn.addEventListener('click', toggleSound);

        // === ĞŸĞĞ£Ğ—Ğ / ĞŸĞ ĞĞ”ĞĞ’Ğ–Ğ•ĞĞĞ¯ (Ğ¡ĞŸĞ ĞĞ©Ğ•ĞĞ) ===
        function togglePause() {
            if (!isGameRunning) return;
            if (isPaused) {
                isPaused = false;
                stopBtn.textContent = "â¸ ĞŸĞ°ÑƒĞ·Ğ°";
                endMessage.style.display = 'none';
                if (!bgMusic.muted) bgMusic.play().catch(console.log);
                if (currentGame === 'game1') requestAnimationFrame(animateGame1);
                else if (currentGame === 'game2') requestAnimationFrame(animateGame2);
            } else {
                isPaused = true;
                stopBtn.textContent = "â–¶ï¸ ĞŸÑ€Ğ¾Ğ´Ğ¾Ğ²Ğ¶Ğ¸Ñ‚Ğ¸";
                bgMusic.pause();
                endMessage.textContent = "â¸ ĞŸĞ°ÑƒĞ·Ğ°";
                endMessage.style.display = 'block';
                setTimeout(() => endMessage.style.display = 'none', 2000);
            }
        }
        stopBtn.addEventListener('click', togglePause);
        
        // !!! Ğ’Ğ˜Ğ”ĞĞ›Ğ•ĞĞ handleDoubleTap Ñ‚Ğ° Ğ¹Ğ¾Ğ³Ğ¾ Ğ¾Ğ±Ñ€Ğ¾Ğ±Ğ½Ğ¸ĞºĞ¸, Ñ‰Ğ¾Ğ± ÑƒĞ½Ğ¸ĞºĞ½ÑƒÑ‚Ğ¸ Ğ¿Ğ¾Ğ¼Ğ¸Ğ»Ğ¾Ğº Ğ· Ğ´Ñ–Ñ‚ÑŒĞ¼Ğ¸ !!!

Â  Â  Â  Â  // === Ğ£ĞŸĞ ĞĞ’Ğ›Ğ†ĞĞĞ¯ Ğ“Ğ ĞĞ® ===
Â  Â  Â  Â  function stopGame() {
            // Ğ’Ğ¸Ñ…Ñ–Ğ´
Â  Â  Â  Â  Â  Â  isGameRunning = false;
Â  Â  Â  Â  Â  Â  isPaused = false;
Â  Â  Â  Â  Â  Â  if (animationFrameId) cancelAnimationFrame(animationFrameId);
            
Â  Â  Â  Â  Â  Â  canvasGameContainer.style.display = 'none';
Â  Â  Â  Â  Â  Â  cleaningGameContainer.style.display = 'none';
Â  Â  Â  Â  Â  Â  document.querySelector('a-scene').style.display = 'block';
            toothModel.object3D.visible = true; // Ğ“Ğ°Ñ€Ğ°Ğ½Ñ‚ÑƒÑ”Ğ¼Ğ¾ Ğ²Ğ¸Ğ´Ğ¸Ğ¼Ñ–ÑÑ‚ÑŒ Ğ¼Ğ¾Ğ´ĞµĞ»Ñ–
            
Â  Â  Â  Â  Â  Â  bgMusic.pause();
Â  Â  Â  Â  Â  Â  updateUI();
Â  Â  Â  Â  }

Â  Â  Â  Â  function showRules(gameType) {
Â  Â  Â  Â  Â  Â  currentGame = gameType;
Â  Â  Â  Â  Â  Â  document.querySelector('a-scene').style.display = 'none';
Â  Â  Â  Â  Â  Â  rulesMessage.style.display = 'block';
            updateUI();
Â  Â  Â  Â  }

Â  Â  Â  Â  startGame1Btn.addEventListener('click', () => showRules('game1'));
Â  Â  Â  Â  startGame2Btn.addEventListener('click', () => showRules('game2'));
Â  Â  Â  Â  closeRulesBtn.addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  rulesMessage.style.display = 'none';
            // Ğ’ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ÑÑ”Ğ¼Ğ¾ Ğ·Ğ¼ĞµĞ½ÑˆĞµĞ½Ğ¸Ğ¹ Ñ‡Ğ°Ñ Ğ´Ğ»Ñ Game 1
Â  Â  Â  Â  Â  Â  if (currentGame === 'game1') startCanvasGame(45); // 45 ÑĞµĞºÑƒĞ½Ğ´
Â  Â  Â  Â  Â  Â  else if (currentGame === 'game2') startCanvasGame(0);
Â  Â  Â  Â  });
        rulesBtn.addEventListener('click', () => {
            // Ğ¯ĞºÑ‰Ğ¾ Ğ³Ñ€Ğ° Ğ·Ğ°Ğ¿ÑƒÑ‰ĞµĞ½Ğ°, Ğ¿Ğ¾ĞºĞ°Ğ·ÑƒÑ”Ğ¼Ğ¾ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ°, Ğ°Ğ»Ğµ Ğ½Ğµ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾ Ğ´Ğ¾ Ğ³Ñ€Ğ¸
            if (isGameRunning) togglePause();
            showRules(currentGame);
        });


Â  Â  Â  Â  // === Ğ“Ğ Ğ 1: Ğ—Ğ”ĞĞ ĞĞ’Ğ˜Ğ™ Ğ’Ğ˜Ğ‘Ğ†Ğ  (ĞœĞĞ”Ğ˜Ğ¤Ğ†ĞšĞĞ’ĞĞĞ) ===
Â  Â  Â  Â  function startCanvasGame(duration) {
Â  Â  Â  Â  Â  Â  isGameRunning = true;
Â  Â  Â  Â  Â  Â  isPaused = false;
            stopBtn.textContent = "âŒ Ğ’Ğ¸Ñ…Ñ–Ğ´"; // Ğ—Ğ¼Ñ–Ğ½ÑÑ”Ğ¼Ğ¾ ĞºĞ½Ğ¾Ğ¿ĞºÑƒ Ğ½Ğ° "Ğ’Ğ¸Ñ…Ñ–Ğ´"
Â  Â  Â  Â  Â  Â  document.querySelector('a-scene').style.display = 'none';
Â  Â  Â  Â  Â  Â  if (duration > 0) {
                // Game 1
Â  Â  Â  Â  Â  Â  Â  Â  canvasGameContainer.style.display = 'block';
                cleaningGameContainer.style.display = 'none';
                endBtn.style.display = 'block';
                cleaningEndBtn.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  initCanvasGame(duration);
Â  Â  Â  Â  Â  Â  } else {
                // Game 2
Â  Â  Â  Â  Â  Â  Â  Â  cleaningGameContainer.style.display = 'block';
                canvasGameContainer.style.display = 'none';
                endBtn.style.display = 'none';
                cleaningEndBtn.style.display = 'block';
Â  Â  Â  Â  Â  Â  Â  Â  initCleaningGame();
Â  Â  Â  Â  Â  Â  }
            updateUI(); // ĞĞ½Ğ¾Ğ²Ğ»ÑÑ”Ğ¼Ğ¾ UI Ğ¿Ñ–ÑĞ»Ñ Ğ¿Ğ¾Ñ‡Ğ°Ñ‚ĞºÑƒ Ğ³Ñ€Ğ¸
Â  Â  Â  Â  }

Â  Â  Â  Â  function initCanvasGame(duration) {
Â  Â  Â  Â  Â  Â  const canvas = document.getElementById('gameCanvas');
Â  Â  Â  Â  Â  Â  const ctx = canvas.getContext('2d');
Â  Â  Â  Â  Â  Â  canvas.width = window.innerWidth;
Â  Â  Â  Â  Â  Â  canvas.height = window.innerHeight;
Â  Â  Â  Â  Â  Â  if (!bgMusic.muted) bgMusic.play().catch(console.log);
Â  Â  Â  Â  Â  Â  const goodEmojis = ['ğŸ¦·', 'ğŸ§šğŸ»', 'ğŸš°', 'ğŸª¥', 'ğŸ', 'ğŸ', 'ğŸ¥•', 'ğŸ¥›']; // Ğ”Ğ¾Ğ´Ğ°Ğ½Ğ¾ ĞºĞ¾Ñ€Ğ¸ÑĞ½Ğµ
Â  Â  Â  Â  Â  Â  const badEmojis = ['ğŸ”', 'ğŸŸ', 'ğŸ•', 'ğŸ¦', 'ğŸ­', 'ğŸ«', 'ğŸ§', 'ğŸ©']; // Ğ”Ğ¾Ğ´Ğ°Ğ½Ğ¾ ÑˆĞºÑ–Ğ´Ğ»Ğ¸Ğ²Ğµ
Â  Â  Â  Â  Â  Â  function createEmoji() {
Â  Â  Â  Â  Â  Â  Â  Â  const isGood = Math.random() > 0.5;
Â  Â  Â  Â  Â  Â  Â  Â  return {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  x: Math.random() * canvas.width,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  y: -50, // ĞŸĞ¾Ñ‡Ğ¸Ğ½Ğ°Ñ”Ğ¼Ğ¾ Ğ·Ğ²ĞµÑ€Ñ…Ñƒ
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  size: 50 + Math.random() * 40, // Ğ¢Ñ€Ğ¾Ñ…Ğ¸ Ğ¼ĞµĞ½ÑˆĞµ Ñ€Ñ–Ğ·Ğ½Ğ¸Ñ†Ñ–
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  vx: (Math.random() - 0.5) * 1, // ĞŸĞ¾Ğ²Ñ–Ğ»ÑŒĞ½Ñ–ÑˆĞµ Ğ¿Ğ¾ Ğ³Ğ¾Ñ€Ğ¸Ğ·Ğ¾Ğ½Ñ‚Ğ°Ğ»Ñ–
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  vy: 1 + Math.random() * 1.5, // ĞŸĞ°Ğ´Ğ°ÑÑ‚ÑŒ Ğ²Ğ½Ğ¸Ğ·
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  value: isGood ? goodEmojis[Math.floor(Math.random() * goodEmojis.length)] : badEmojis[Math.floor(Math.random() * badEmojis.length)],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  isGood: isGood,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  isClicked: false,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  fadeOut: 0
Â  Â  Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  emojis = [];
Â  Â  Â  Â  Â  Â  startTime = Date.now();
Â  Â  Â  Â  Â  Â  score = 0;
Â  Â  Â  Â  Â  Â  timerText.textContent = `â³ Ğ§Ğ°Ñ: ${duration}`;
Â  Â  Â  Â  Â  Â  scoreText.textContent = `ğŸŒŸ Ğ‘Ğ°Ğ»Ñ–Ğ²: 0`;

Â  Â  Â  Â  Â  Â  if (inputHandler) {
Â  Â  Â  Â  Â  Â  Â  Â  canvas.removeEventListener('click', inputHandler);
Â  Â  Â  Â  Â  Â  Â  Â  canvas.removeEventListener('touchstart', inputHandler);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  inputHandler = (e) => {
Â  Â  Â  Â  Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  Â  Â  Â  Â  if (isPaused) return;
Â  Â  Â  Â  Â  Â  Â  Â  const rect = canvas.getBoundingClientRect();
Â  Â  Â  Â  Â  Â  Â  Â  const x = (e.clientX || (e.touches?.[0]?.clientX)) - rect.left;
Â  Â  Â  Â  Â  Â  Â  Â  const y = (e.clientY || (e.touches?.[0]?.clientY)) - rect.top;
                let clicked = false;
Â  Â  Â  Â  Â  Â  Â  Â  for (let i = 0; i < emojis.length; i++) {
                    const emoji = emojis[i];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (emoji.isClicked || emoji.fadeOut > 0) continue;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const dx = x - emoji.x;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const dy = y - emoji.y;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const distance = Math.sqrt(dx * dx + dy * dy);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (distance < emoji.size / 2) {
                        clicked = true;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  emoji.isClicked = true;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  emoji.fadeOut = 1;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (emoji.isGood) { 
                            score += 10; 
                            emoji.value = 'âœ¨'; 
                        }
                        // ĞšĞ›Ğ®Ğ§ĞĞ’Ğ Ğ—ĞœĞ†ĞĞ: Ğ¨Ğ¢Ğ ĞĞ¤Ğ˜ ĞŸĞ Ğ˜Ğ‘Ğ ĞĞĞ!
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else { 
                            emoji.value = 'â“'; // ĞĞµ Ğ·Ğ½Ñ–Ğ¼Ğ°Ñ”Ğ¼Ğ¾ Ğ±Ğ°Ğ»Ğ¸
                        } 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  scoreText.textContent = `ğŸŒŸ Ğ‘Ğ°Ğ»Ñ–Ğ²: ${score}`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!applauseSound.muted) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  applauseSound.currentTime = 0;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  applauseSound.play().catch(console.log);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
                        break;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  canvas.addEventListener('click', inputHandler);
Â  Â  Â  Â  Â  Â  canvas.addEventListener('touchstart', inputHandler, { passive: false });
Â  Â  Â  Â  Â  Â  
            let lastSpawnTime = 0;

Â  Â  Â  Â  Â  Â  function animateGame1() {
Â  Â  Â  Â  Â  Â  Â  Â  if (!isGameRunning || isPaused) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  animationFrameId = requestAnimationFrame(animateGame1);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Ğ¡Ğ¿Ğ°ÑƒĞ½ Ğ¾Ğ±'Ñ”ĞºÑ‚Ñ–Ğ² (Ñ‚Ñ€Ğ¾Ñ…Ğ¸ Ñ‡Ğ°ÑÑ‚Ñ–ÑˆĞµ)
                const now = Date.now();
                if (now - lastSpawnTime > 700) { 
                    emojis.push(createEmoji());
                    lastSpawnTime = now;
                }

Â  Â  Â  Â  Â  Â  Â  Â  emojis = emojis.filter(e => e.fadeOut > 0 || (!e.isClicked && e.y < canvas.height + e.size)); // Ğ’Ğ¸Ğ´Ğ°Ğ»ÑÑ”Ğ¼Ğ¾ Ñ‚Ğµ, Ñ‰Ğ¾ Ğ²Ğ¿Ğ°Ğ»Ğ¾ Ğ°Ğ±Ğ¾ Ğ·Ğ½Ğ¸ĞºĞ»Ğ¾
Â  Â  Â  Â  Â  Â  Â  Â  emojis.forEach(e => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (e.isClicked && e.fadeOut > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  e.fadeOut -= 0.1;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.globalAlpha = e.fadeOut;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else if (!e.isClicked) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  e.x += e.vx;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  e.y += e.vy;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Ğ’Ñ–Ğ´Ğ±Ğ¸Ğ²Ğ°Ğ½Ğ½Ñ Ğ²Ñ–Ğ´ ÑÑ‚Ñ–Ğ½Ğ¾Ğº
                        if (e.x < e.size/2 || e.x > canvas.width - e.size/2) e.vx *= -1;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.font = `${e.size}px 'Comic Neue'`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.textAlign = 'center';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.textBaseline = 'middle';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.fillStyle = e.isGood ? '#00FF7F' : '#FF4757';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.fillText(e.value, e.x, e.y);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.globalAlpha = 1;
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  const elapsed = Math.floor((Date.now() - startTime) / 1000);
Â  Â  Â  Â  Â  Â  Â  Â  const remaining = duration - elapsed;
Â  Â  Â  Â  Â  Â  Â  Â  if (remaining <= 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ĞŸĞ¾Ğ²Ñ–Ğ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ½Ñ Ğ¿Ñ€Ğ¾ Ğ¿ĞµÑ€ĞµÑ…Ñ–Ğ´
                    endMessage.textContent = `ğŸ‰ ĞšĞ»Ğ°Ñ! Ğ¢Ğ²Ñ–Ğ¹ Ñ€Ğ°Ñ…ÑƒĞ½Ğ¾Ğº: ${score}! Ğ§Ğ°Ñ Ñ‡Ğ¸ÑÑ‚Ğ¸Ñ‚Ğ¸ Ğ·ÑƒĞ±Ñ‡Ğ¸Ğº! ğŸ§¼`;
                    endMessage.style.display = 'block';
                    setTimeout(() => { endMessage.style.display = 'none'; initCleaningGame(); }, 3000); // 3 ÑĞµĞºÑƒĞ½Ğ´Ğ¸ Ğ½Ğ° Ğ¿Ğ¾ĞºĞ°Ğ·
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  timerText.textContent = `â³ Ğ§Ğ°Ñ: ${String(remaining).padStart(2, '0')}`;
Â  Â  Â  Â  Â  Â  Â  Â  animationFrameId = requestAnimationFrame(animateGame1);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  document.getElementById('endBtn').onclick = () => {
                // Ğ”Ğ¾ÑÑ‚Ñ€Ğ¾ĞºĞ¾Ğ²Ğ¸Ğ¹ Ğ¿ĞµÑ€ĞµÑ…Ñ–Ğ´
                if (animationFrameId) cancelAnimationFrame(animationFrameId);
Â  Â  Â  Â  Â  Â  Â  Â  endMessage.textContent = `â–¶ï¸ Ğ”Ğ¾ Ñ‡Ğ¸ÑÑ‚ĞºĞ¸! Ğ‘Ğ°Ğ»Ñ–Ğ²: ${score}!`;
                endMessage.style.display = 'block';
                setTimeout(() => { endMessage.style.display = 'none'; initCleaningGame(); }, 2000);
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  animationFrameId = requestAnimationFrame(animateGame1);
Â  Â  Â  Â  }

Â  Â  Â  Â  // === Ğ“Ğ Ğ 2: Ğ§Ğ˜Ğ¡Ğ¢ĞšĞ Ğ—Ğ£Ğ‘Ğ†Ğ’ (ĞœĞĞ”Ğ˜Ğ¤Ğ†ĞšĞĞ’ĞĞĞ) ===
Â  Â  Â  Â  function initCleaningGame() {
Â  Â  Â  Â  Â  Â  currentGame = 'game2';
Â  Â  Â  Â  Â  Â  const canvas = document.getElementById('cleaningCanvas');
Â  Â  Â  Â  Â  Â  const ctx = canvas.getContext('2d');
Â  Â  Â  Â  Â  Â  canvas.width = window.innerWidth;
Â  Â  Â  Â  Â  Â  canvas.height = window.innerHeight;
            canvasGameContainer.style.display = 'none';
            cleaningGameContainer.style.display = 'block';
            endBtn.style.display = 'none';
            cleaningEndBtn.style.display = 'block';
            stopBtn.textContent = "âŒ Ğ’Ğ¸Ñ…Ñ–Ğ´";
            
Â  Â  Â  Â  Â  Â  if (!bgMusic.muted) bgMusic.play().catch(console.log);
Â  Â  Â  Â  Â  Â  const toothX = canvas.width / 2;
Â  Â  Â  Â  Â  Â  const toothY = canvas.height / 2;
Â  Â  Â  Â  Â  Â  const toothRadius = Math.min(canvas.width / 2.5, 200); // Ğ—Ğ±Ñ–Ğ»ÑŒÑˆÑƒÑ”Ğ¼Ğ¾ Ğ·ÑƒĞ±Ñ‡Ğ¸Ğº Ğ´Ğ»Ñ Ğ·Ñ€ÑƒÑ‡Ğ½Ğ¾ÑÑ‚Ñ–
            
            let cleaningTime = 20; // 20 ÑĞµĞºÑƒĞ½Ğ´
            startTime = Date.now();

Â  Â  Â  Â  Â  Â  spots = [];
Â  Â  Â  Â  Â  Â  for (let i = 0; i < 8; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  spots.push({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  x: toothX + (Math.random() - 0.5) * toothRadius * 0.8,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  y: toothY + (Math.random() - 0.5) * toothRadius * 0.8,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  size: 20 + Math.random() * 10, // Ğ¢Ñ€Ğ¾Ñ…Ğ¸ Ğ±Ñ–Ğ»ÑŒÑˆÑ– Ğ¿Ğ»ÑĞ¼Ğ¸
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cleaned: false
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  function drawTooth() {
                // ĞœĞ°Ğ»ÑÑ”Ğ¼Ğ¾ Ğ²ĞµĞ»Ğ¸ĞºĞ¸Ğ¹ Ğ·ÑƒĞ±Ñ‡Ğ¸Ğº
Â  Â  Â  Â  Â  Â  Â  Â  ctx.beginPath();
Â  Â  Â  Â  Â  Â  Â  Â  ctx.arc(toothX, toothY, toothRadius, 0, Math.PI * 2);
Â  Â  Â  Â  Â  Â  Â  Â  ctx.fillStyle = '#FFFFFF';
Â  Â  Â  Â  Â  Â  Â  Â  ctx.fill();
Â  Â  Â  Â  Â  Â  Â  Â  ctx.strokeStyle = '#000000';
Â  Â  Â  Â  Â  Â  Â  Â  ctx.lineWidth = 5;
Â  Â  Â  Â  Â  Â  Â  Â  ctx.stroke();
                
                // ĞœĞ°Ğ»ÑÑ”Ğ¼Ğ¾ Ğ¿Ğ»ÑĞ¼Ğ¸
Â  Â  Â  Â  Â  Â  Â  Â  spots.forEach(spot => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!spot.cleaned) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.beginPath();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.arc(spot.x, spot.y, spot.size, 0, Math.PI * 2);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.fillStyle = '#FFD700';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.fill();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  }
            
Â  Â  Â  Â  Â  Â  function checkClean(x, y) {
Â  Â  Â  Â  Â  Â  Â  Â  if (isPaused) return;
Â  Â  Â  Â  Â  Â  Â  Â  spots.forEach(spot => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (spot.cleaned) return;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const dx = x - spot.x;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const dy = y - spot.y;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const distance = Math.sqrt(dx * dx + dy * dy);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (distance < spot.size + 15) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  spot.cleaned = true;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  score += 10;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  scoreText.textContent = `ğŸŒŸ Ğ‘Ğ°Ğ»Ñ–Ğ²: ${score}`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!applauseSound.muted) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  applauseSound.currentTime = 0;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  applauseSound.play().catch(console.log);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  });
                if (spots.every(s => s.cleaned)) endCleaningGame(true); // Ğ”Ğ¾ÑÑ‚Ñ€Ğ¾ĞºĞ¾Ğ²Ğµ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ½Ñ
Â  Â  Â  Â  Â  Â  }
            
Â  Â  Â  Â  Â  Â  function endCleaningGame(allCleaned = false) {
Â  Â  Â  Â  Â  Â  Â  Â  if (animationFrameId) cancelAnimationFrame(animationFrameId);
                canvas.removeEventListener('click', touchHandler);
                canvas.removeEventListener('touchstart', touchHandler);

                const finalCleaned = spots.filter(s => s.cleaned).length;
                const totalSpots = spots.length;
                
Â  Â  Â  Â  Â  Â  Â  Â  if (finalCleaned === totalSpots) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!applauseSound.muted) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  applauseSound.currentTime = 0;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  applauseSound.play().catch(console.log);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  endMessage.textContent = `ğŸ‰ Ğ¢Ğ˜ Ğ¡Ğ£ĞŸĞ•Ğ ! Ğ†Ğ´ĞµĞ°Ğ»ÑŒĞ½Ğ° Ñ‡Ğ¸ÑÑ‚ĞºĞ°! Ğ¢Ğ²Ñ–Ğ¹ Ñ€Ğ°Ñ…ÑƒĞ½Ğ¾Ğº: ${score} Ğ±Ğ°Ğ»Ñ–Ğ²! ğŸŒŸ`;
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  endMessage.textContent = `ğŸ’¡ Ğ¢Ğ¸ Ğ¿Ğ¾Ñ‡Ğ¸ÑÑ‚Ğ¸Ğ² ${finalCleaned} Ğ· ${totalSpots} Ğ¿Ğ»ÑĞ¼. Ğ¡Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹ Ñ‰Ğµ Ñ€Ğ°Ğ·, Ñ‰Ğ¾Ğ± Ğ±ÑƒĞ»Ğ¾ Ñ–Ğ´ĞµĞ°Ğ»ÑŒĞ½Ğ¾!`;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  endMessage.style.display = 'block';
Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  endMessage.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  stopGame();
Â  Â  Â  Â  Â  Â  Â  Â  }, 5000);
Â  Â  Â  Â  Â  Â  }
            
Â  Â  Â  Â  Â  Â  let touchHandler = null;
Â  Â  Â  Â  Â  Â  touchHandler = (e) => {
Â  Â  Â  Â  Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  Â  Â  Â  Â  const rect = canvas.getBoundingClientRect();
Â  Â  Â  Â  Â  Â  Â  Â  const x = (e.clientX || (e.touches?.[0]?.clientX)) - rect.left;
Â  Â  Â  Â  Â  Â  Â  Â  const y = (e.clientY || (e.touches?.[0]?.clientY)) - rect.top;
                
                // ĞŸĞµÑ€ĞµĞ²Ñ–Ñ€ÑÑ”Ğ¼Ğ¾, Ñ‡Ğ¸ ĞºĞ»Ñ–Ğº/Ğ´Ğ¾Ñ‚Ğ¸Ğº Ğ±ÑƒĞ² Ñƒ Ğ¼ĞµĞ¶Ğ°Ñ… Ğ·ÑƒĞ±Ñ‡Ğ¸ĞºĞ°
                const dx_tooth = x - toothX;
                const dy_tooth = y - toothY;
                if (Math.sqrt(dx_tooth * dx_tooth + dy_tooth * dy_tooth) <= toothRadius) {
                    checkClean(x, y);
                }
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  canvas.addEventListener('click', touchHandler);
Â  Â  Â  Â  Â  Â  canvas.addEventListener('touchstart', touchHandler);
            
            cleaningEndBtn.onclick = () => endCleaningGame(false);

            function animateGame2() {
                if (!isGameRunning || isPaused) {
                    animationFrameId = requestAnimationFrame(animateGame2);
                    return;
                }
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                drawTooth();
                
                // ĞĞ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ Ñ‚Ğ°Ğ¹Ğ¼ĞµÑ€Ğ°
                const elapsed = Math.floor((Date.now() - startTime) / 1000);
                const remaining = cleaningTime - elapsed;
                
                if (remaining <= 0) {
                    endCleaningGame(false);
                    return;
                }
                timerText.textContent = `â³ Ğ§Ğ°Ñ: ${String(remaining).padStart(2, '0')}`;
                
                animationFrameId = requestAnimationFrame(animateGame2);
            }
            
            animationFrameId = requestAnimationFrame(animateGame2);
Â  Â  Â  Â  }
Â  Â  </script>
</body>
</html>
